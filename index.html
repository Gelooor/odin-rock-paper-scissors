<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <section class="scores">
      <div class="player-score">Player: <span>0</span></div>
      <div class="computer-score">Computer: <span>0</span></div>
    </section>

    <button>Rock</button>
    <button>Paper</button>
    <button>Scissors</button>

    <div class="result"></div>

    <div class="winner"></div>

    <script>
      const SELECTIONS = [
        {
          name: "myline",
          image: "./images/myline.png",
          beats: "gelo",
        },
        {
          name: "gelo",
          image: "./images/gelo.png",
          beats: "willo",
        },
        {
          name: "willo",
          image: "./images/willo.png",
          beats: "myline",
        },
      ];

      const scores = {
        player: 0,
        computer: 0,
      };

      function playRound(playerSelection, computerSelection) {
        const winMessage = `Player won! ${playerSelection.toUpperCase()} beats ${computerSelection.toUpperCase()}`;
        const loseMessage = `Computer won! ${computerSelection.toUpperCase()} beats ${playerSelection.toUpperCase()}`;

        const result = document.querySelector(".result");

        const playerScore =
          document.querySelector(".player-score").firstElementChild;
        const computerScore =
          document.querySelector(".computer-score").firstElementChild;

        switch (true) {
          case playerSelection === computerSelection:
            result.textContent = `Draw! ${playerSelection.toUpperCase()} and ${computerSelection.toUpperCase()} beats each other`;
            break;
          case playerSelection === "rock" && computerSelection === "scissors":
          case playerSelection === "paper" && computerSelection === "rock":
          case playerSelection === "scissors" && computerSelection === "paper":
            result.textContent = winMessage;
            scores.player++;
            playerScore.textContent = scores.player;
            break;
          default:
            result.textContent = loseMessage;
            scores.computer++;
            computerScore.textContent = scores.computer;
            break;
        }
      }

      function getComputerChoice() {
        const choices = ["rock", "paper", "scissors"];
        return choices[Math.floor(Math.random() * 3)];
      }

      function displayWinner() {
        const winner = document.querySelector(".winner");
        if (scores.player === 5) {
          winner.textContent = "Player won!";
        } else if (scores.computer === 5) {
          winner.textContent = "Computer won!";
        }
      }

      function isGameOver() {
        return scores.player === 5 || scores.computer === 5;
      }

      const buttons = document.querySelectorAll("button");
      buttons.forEach((button) => {
        button.addEventListener("click", (e) => {
          if (isGameOver()) {
            return;
          }

          const playerSelection = e.target.textContent.toLowerCase();
          const computerSelection = getComputerChoice();

          playRound(playerSelection, computerSelection);
          displayWinner();
        });
      });
    </script>
  </body>
</html>
