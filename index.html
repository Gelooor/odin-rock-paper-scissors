<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors</title>

    <style>
      .selections {
        display: flex;
        justify-content: center;
        gap: 2rem;
      }

      .selections button {
        background: none;
        border: none;
        outline: none;
        cursor: pointer;
        transition: 100ms;
      }

      .selections button:hover {
        transform: scale(1.1);
      }

      .selections img {
        width: 150px;
      }
    </style>
  </head>
  <body>
    <section class="scores">
      <div class="player-score">Player: <span>0</span></div>
      <div class="computer-score">Computer: <span>0</span></div>
    </section>

    <div class="selections">
      <button data-selection="myline">
        <img src="./images/myline.png" alt="" />
      </button>
      <button data-selection="gelo">
        <img src="./images/gelo.png" alt="" />
      </button>
      <button data-selection="willo">
        <img src="./images/willo.png" alt="" />
      </button>
    </div>

    <div class="result"></div>

    <div class="winner"></div>

    <script>
      const playerScore =
        document.querySelector(".player-score").firstElementChild;
      const computerScore =
        document.querySelector(".computer-score").firstElementChild;
      const buttons = document.querySelectorAll("[data-selection]");
      const result = document.querySelector(".result");
      const winner = document.querySelector(".winner");

      const SELECTIONS = [
        {
          name: "myline",
          image: "./images/myline.png",
          beats: "gelo",
        },
        {
          name: "gelo",
          image: "./images/gelo.png",
          beats: "willo",
        },
        {
          name: "willo",
          image: "./images/willo.png",
          beats: "myline",
        },
      ];

      const scores = {
        player: 0,
        computer: 0,
      };

      buttons.forEach((button) => {
        button.addEventListener("click", (e) => {
          if (isGameOver()) {
            return;
          }

          const playerSelection = e.target.textContent.toLowerCase();
          const computerSelection = getComputerChoice();

          playRound(playerSelection, computerSelection);
          displayWinner();
        });
      });

      function playRound(playerSelection, computerSelection) {
        const winMessage = `Player won! ${playerSelection.toUpperCase()} beats ${computerSelection.toUpperCase()}`;
        const loseMessage = `Computer won! ${computerSelection.toUpperCase()} beats ${playerSelection.toUpperCase()}`;

        switch (true) {
          case playerSelection === computerSelection:
            result.textContent = `Draw! ${playerSelection.toUpperCase()} and ${computerSelection.toUpperCase()} beats each other`;
            break;
          case playerSelection === "rock" && computerSelection === "scissors":
          case playerSelection === "paper" && computerSelection === "rock":
          case playerSelection === "scissors" && computerSelection === "paper":
            result.textContent = winMessage;
            scores.player++;
            playerScore.textContent = scores.player;
            break;
          default:
            result.textContent = loseMessage;
            scores.computer++;
            computerScore.textContent = scores.computer;
            break;
        }
      }

      function getComputerChoice() {
        const choices = ["rock", "paper", "scissors"];
        return choices[Math.floor(Math.random() * 3)];
      }

      function displayWinner() {
        if (scores.player === 5) {
          winner.textContent = "Player won!";
        } else if (scores.computer === 5) {
          winner.textContent = "Computer won!";
        }
      }

      function isGameOver() {
        return scores.player === 5 || scores.computer === 5;
      }
    </script>
  </body>
</html>
